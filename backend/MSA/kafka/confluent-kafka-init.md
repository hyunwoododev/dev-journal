
# Confluent Kafka μ„λ²„ μ„¤μ • κ°€μ΄λ“

Confluent Kafka μ‚¬μ΄νΈμ—μ„ Kafka μ„λ²„λ¥Ό μ„¤μ •ν•λ” κ³Όμ •μ„ λ‹¨κ³„λ³„λ΅ μ„¤λ…ν•©λ‹λ‹¤.

## 1. ν΄λ¬μ¤ν„° μƒμ„±

Kafka ν΄λ¬μ¤ν„°λ” μ—¬λ¬ Kafka λΈλ΅μ»¤(λ…Έλ“)λ΅ κµ¬μ„±λμ–΄ μμΌλ©°, κ° λΈλ΅μ»¤λ” λ©”μ‹μ§€λ¥Ό μ²λ¦¬ν•κ³  μ €μ¥ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤.

- Confluent Cloudμ— λ΅κ·ΈμΈν•μ—¬ **Environments** λ©”λ‰΄λ΅ μ΄λ™ν•©λ‹λ‹¤.
- **Create cluster/Add cluster** λ²„νΌμ„ ν΄λ¦­ν•μ—¬ μƒ ν΄λ¬μ¤ν„°λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
  - ν•„μ”ν• μ ν•(ν‘μ¤€, κΈ°λ³Έ, ν”„λ¦¬λ―Έμ—„ λ“±)μ„ μ„ νƒν•©λ‹λ‹¤.
  - μ›ν•λ” ν΄λΌμ°λ“ μ„λΉ„μ¤μ™€ λ¦¬μ „μ„ μ„¤μ •ν•©λ‹λ‹¤.
  - ν΄λ¬μ¤ν„°μ μ΄λ¦„μ„ μ§€μ •ν•κ³  **Launch Cluster** λ²„νΌμ„ ν΄λ¦­ν•μ—¬ ν΄λ¬μ¤ν„°λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

> π’΅ **Note**: ν΄λ¬μ¤ν„° μƒμ„± μ‹, λΈλ΅μ»¤μ κ°μμ™€ μ„±λ¥μ— λ”°λΌ μ²λ¦¬λ‰κ³Ό μ•μ •μ„±μ΄ λ‹¬λΌμ§‘λ‹λ‹¤.

## 2. ν† ν”½ μƒμ„±

Kafka ν† ν”½μ€ λ©”μ‹μ§€λ¥Ό μ €μ¥ν•λ” λ‹¨μ„λ΅, νΉμ •ν• λ©”μ‹μ§€ νλ¦„μ„ κ΄€λ¦¬ν•©λ‹λ‹¤.

- ν΄λ¬μ¤ν„° λ€μ‹λ³΄λ“μ—μ„ **Topics** λ©”λ‰΄λ΅ μ΄λ™ν•©λ‹λ‹¤.
- **Create Topic** λ²„νΌμ„ ν΄λ¦­ν•μ—¬ μƒ ν† ν”½μ„ μƒμ„±ν•©λ‹λ‹¤.
  - ν† ν”½ μ΄λ¦„μ„ μ„¤μ •ν•©λ‹λ‹¤.
  - Partitionsλ¥Ό μ„¤μ •ν•μ—¬ ν† ν”½μ λ³‘λ ¬ μ²λ¦¬λ¥Ό μ΅°μ •ν•©λ‹λ‹¤.
  - κΈ°νƒ€ μ„¤μ •(μµλ€ λ©”μ‹μ§€ ν¬κΈ°, λ³΄μ΅΄ κΈ°κ°„ λ“±)μ„ ν•„μ”μ— λ”°λΌ κµ¬μ„±ν•©λ‹λ‹¤.
- μ„¤μ •μ„ μ™„λ£ν•κ³  **Create with Defaults**λ¥Ό ν΄λ¦­ν•μ—¬ ν† ν”½μ„ μƒμ„±ν•©λ‹λ‹¤.

> π’΅ **Tip**: νν‹°μ… μλ” ν† ν”½μ λ³‘λ ¬ μ²λ¦¬ μ„±λ¥μ— μν–¥μ„ λ―ΈμΉλ©°, λ³µμ  μΈμλ” λ°μ΄ν„°μ λ‚΄κµ¬μ„±μ— μν–¥μ„ μ¤λ‹λ‹¤.

## 3. Schema Registry νμ΄μ§€λ΅ μ΄λ™

1. ν΄λ¬μ¤ν„° λ€μ‹λ³΄λ“μ—μ„ **Schema Registry** λ©”λ‰΄λ¥Ό μ„ νƒν•©λ‹λ‹¤.
2. **Subjects** νμ΄μ§€λ΅ μ΄λ™ν•μ—¬ μƒλ΅μ΄ μ¤ν‚¤λ§ μ£Όμ λ¥Ό μƒμ„±ν•  μ¤€λΉ„λ¥Ό ν•©λ‹λ‹¤.

> π’΅ **Note**: `topic-name-value` ν•μ‹μ€ λ°μ΄ν„° μ¤ν‚¤λ§κ°€ Kafka ν† ν”½ λ°μ΄ν„°μ™€ μ—°κ²°λλ„λ΅ κ·μΉ™ν™”λ λ…λ… λ°©μ‹μ…λ‹λ‹¤.

## 4. μƒ μ¤ν‚¤λ§ μ£Όμ (Subject) μƒμ„± λ° μ¤ν‚¤λ§ λ“±λ΅

1. **Create Subject** λ²„νΌμ„ ν΄λ¦­ν•μ—¬ μƒ μ£Όμ λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
2. **Subject Name**μ— `topic-name-value` ν•μ‹μΌλ΅ ν† ν”½ μ΄λ¦„μ„ μ…λ ¥ν•©λ‹λ‹¤. (`topic-name` λ¶€λ¶„μ€ μ‹¤μ  Kafka ν† ν”½ μ΄λ¦„μΌλ΅ λ€μ²΄ν•©λ‹λ‹¤.)
3. **Schema Type**μ„ μ„ νƒν•©λ‹λ‹¤:
   - **Avro** λλ” **JSON Schema** μ¤‘ ν•λ‚λ¥Ό μ„ νƒν•μ—¬ λ°μ΄ν„° μ¤ν‚¤λ§ νƒ€μ…μ„ μ„¤μ •ν•©λ‹λ‹¤.
4. μ¤ν‚¤λ§ μ •μλ¥Ό JSON ν•μ‹μΌλ΅ μ…λ ¥ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, μ•„λμ™€ κ°™μ€ JSON μ¤ν‚¤λ§λ¥Ό μ…λ ¥ν•©λ‹λ‹¤:

   ```json
   {
     "type": "record",
     "name": "GPS",
     "namespace": "com.cop.sp",
     "doc": "gps schema",
     "fields": [
       {
         "name": "latitude",
         "type": "double",
         "doc": "lat gps data"
       },
       {
         "name": "longitude",
         "type": "double",
         "doc": "lon gps data"
       }
     ]
   }
   ```

5. μ¤ν‚¤λ§λ¥Ό μ…λ ¥ν• ν›„, **Create** λλ” **Save** λ²„νΌμ„ ν΄λ¦­ν•μ—¬ μ¤ν‚¤λ§λ¥Ό λ“±λ΅ν•©λ‹λ‹¤.

## 5. μ¤ν‚¤λ§ νΈν™μ„± μ„¤μ •

1. λ“±λ΅ν• μ£Όμ (Subject)λ¥Ό μ„ νƒν•μ—¬ μƒμ„Έ νμ΄μ§€λ΅ μ΄λ™ν•©λ‹λ‹¤.
2. **Compatibility Settings** μ„Ήμ…μ—μ„ νΈν™μ„± μ„¤μ •μ„ ν™•μΈν•κ±°λ‚ λ³€κ²½ν•  μ μμµλ‹λ‹¤.
   - **Compatibility Level**μ„ `BACKWARD`, `FORWARD`, `FULL`, `NONE` μ¤‘μ—μ„ μ„ νƒν•©λ‹λ‹¤.
   - μλ¥Ό λ“¤μ–΄, **Backward Compatibility**λ¥Ό μ μ§€ν•λ ¤λ©΄ `BACKWARD`λ¥Ό μ„ νƒν•©λ‹λ‹¤.
   - κ° νΈν™μ„± μµμ…μ μλ―Έλ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:
     - `BACKWARD`: μƒ μ¤ν‚¤λ§κ°€ μ΄μ „ μ¤ν‚¤λ§λ΅ μ‘μ„±λ λ°μ΄ν„°λ¥Ό μ½μ„ μ μλ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤.
     - `FORWARD`: μ΄μ „ μ¤ν‚¤λ§κ°€ μƒ μ¤ν‚¤λ§λ΅ μ‘μ„±λ λ°μ΄ν„°λ¥Ό μ½μ„ μ μλ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤.
     - `FULL`: μƒ λ²„μ „κ³Ό μ΄μ „ λ²„μ „μ΄ μ–‘λ°©ν–¥μΌλ΅ λ°μ΄ν„°λ¥Ό μ½μ„ μ μλ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤.
     - `NONE`: νΈν™μ„± κ²€μ‚¬λ¥Ό λΉ„ν™μ„±ν™”ν•©λ‹λ‹¤.
3. μ„¤μ •μ„ λ³€κ²½ν• ν›„, **Save** λ²„νΌμ„ ν΄λ¦­ν•μ—¬ μ μ©ν•©λ‹λ‹¤.

## 6. ν”„λ΅λ“€μ„ μƒμ„± (Go μ–Έμ–΄ μμ‹)

ν”„λ΅λ“€μ„λ” Kafka ν΄λ¬μ¤ν„°μ— λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤. Confluent Kafkaμ—μ„λ” λ‹¤μ–‘ν• λ°©λ²•μΌλ΅ ν”„λ΅λ“€μ„λ¥Ό μ„¤μ •ν•  μ μμµλ‹λ‹¤. μ•„λλ” Go μ–Έμ–΄λ¥Ό μ‚¬μ©ν•΄ ν”„λ΅λ“€μ„λ¥Ό μƒμ„±ν•λ” μμ μ…λ‹λ‹¤.

```go
package main

import (
    "fmt"
    "github.com/confluentinc/confluent-kafka-go/kafka"
)

func main() {
    p, err := kafka.NewProducer(&kafka.ConfigMap{"bootstrap.servers": "your_kafka_broker_address"})
    if err != nil {
        panic(err)
    }
    defer p.Close()

    topic := "your_topic_name"
    for _, word := range []string{"Hello Kafka", "Confluent Kafka Guide"} {
        err = p.Produce(&kafka.Message{
            TopicPartition: kafka.TopicPartition{Topic: &topic, Partition: kafka.PartitionAny},
            Value:          []byte(word),
        }, nil)

        if err != nil {
            fmt.Printf("Failed to produce message: %v", err)
        }
    }
    p.Flush(15 * 1000)
}
```

> π’΅ **Note**: `bootstrap.servers`μ—λ” ν΄λ¬μ¤ν„°μ λΈλ΅μ»¤ μ£Όμ†λ¥Ό μ…λ ¥ν•λ©°, μ΄λ” ν”„λ΅λ“€μ„κ°€ λΈλ΅μ»¤μ— μ—°κ²°ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.

## 7. μ»¨μλ¨Έ μƒμ„± (Go μ–Έμ–΄ μμ‹)

μ»¨μλ¨Έλ” Kafka ν΄λ¬μ¤ν„°μ—μ„ λ©”μ‹μ§€λ¥Ό μμ‹ ν•μ—¬ μ²λ¦¬ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤.

```go
package main

import (
    "fmt"
    "github.com/confluentinc/confluent-kafka-go/kafka"
)

func main() {
    c, err := kafka.NewConsumer(&kafka.ConfigMap{
        "bootstrap.servers": "your_kafka_broker_address",
        "group.id":          "your_consumer_group_id",
        "auto.offset.reset": "earliest",
    })
    if err != nil {
        panic(err)
    }
    defer c.Close()

    c.SubscribeTopics([]string{"your_topic_name"}, nil)

    for {
        msg, err := c.ReadMessage(-1)
        if err == nil {
            fmt.Printf("Received message: %s", string(msg.Value))
        } else {
            fmt.Printf("Consumer error: %v", err)
        }
    }
}
```

> π’΅ **Tip**: `group.id`λ” μ»¨μλ¨Έ κ·Έλ£Ήμ„ μ§€μ •ν•λ©°, κ°™μ€ κ·Έλ£Ήμ— μ†ν• μ»¨μλ¨Έλ” μ„λ΅μ λ©”μ‹μ§€λ¥Ό κ³µμ ν•μ§€ μ•μµλ‹λ‹¤.

## 8. ν”„λ΅λ“€μ„λ¥Ό ν†µν• λ©”μ‹μ§€ μ „μ†΅

ν”„λ΅λ“€μ„κ°€ μƒμ„±λ ν›„, νΉμ • ν† ν”½μΌλ΅ λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•  μ μμµλ‹λ‹¤. λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•  λ•λ” `Produce` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ©°, μ „μ†΅ν• λ©”μ‹μ§€μ μ„±κ³µ λλ” μ‹¤ν¨ μ—¬λ¶€λ” μ½λ°±μ„ ν†µν•΄ ν™•μΈν•  μ μμµλ‹λ‹¤.

## 9. μ»¨μλ¨Έλ¥Ό ν†µν• λ©”μ‹μ§€ μμ‹ 

μ»¨μλ¨Έκ°€ μƒμ„±λ ν›„, λ©”μ‹μ§€λ¥Ό μμ‹ ν•μ—¬ μ²λ¦¬ν•  μ μμµλ‹λ‹¤. μμ μ—μ„λ” `ReadMessage` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄ λ©”μ‹μ§€λ¥Ό κ°€μ Έμ¤λ©°, μμ‹ λ λ©”μ‹μ§€λ¥Ό μ²λ¦¬ ν›„ μΆ…λ£ν•©λ‹λ‹¤.

---

μ΄ κ°€μ΄λ“λ¥Ό ν†µν•΄ Confluent Cloud μ›Ή UIλ¥Ό μ‚¬μ©ν•΄ Kafka ν΄λ¬μ¤ν„°μ™€ Schema Registryλ¥Ό μ„¤μ •ν•κ³ , κΈ°λ³Έμ μΈ λ©”μ‹μ§€ μ†΅μμ‹ μ΄ κ°€λ¥ν• ν”„λ΅λ“€μ„μ™€ μ»¨μλ¨Έλ¥Ό κµ¬μ„±ν•  μ μμµλ‹λ‹¤. κ° λ‹¨κ³„μ—μ„ λ°μƒν•  μ μλ” μ¤λ¥λ‚ μ„Έλ¶€ μ„¤μ •μ€ Kafka ν΄λΌμ΄μ–ΈνΈ λ¬Έμ„λ¥Ό μ°Έμ΅°ν•λ©΄ λ„μ›€μ΄ λ©λ‹λ‹¤.
